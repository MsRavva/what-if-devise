# ТЕХНИЧЕСКОЕ ЗАДАНИЕ
## Веб-приложение "What If" - Генератор альтернативных сценариев

---

## 1. ОБЩЕЕ ОПИСАНИЕ ПРОЕКТА

**Название:** What If Device  
**Тип:** Веб-приложение для создания альтернативных сценариев историй  
**Цель:** Позволить пользователям вводить свои истории и получать ответы на вопросы "что было бы, если..."

---

## 2. ФУНКЦИОНАЛЬНЫЕ ТРЕБОВАНИЯ

### 2.1 Основной функционал
- **Ввод истории:** Текстовое поле для свободного ввода пользовательской истории
- **Формулировка вопроса:** Поле для ввода альтернативного сценария в свободной форме
- **Генерация ответа:** Обработка запроса через локальную нейросеть и выдача результата
- **Сохранение историй:** Возможность сохранять созданные истории и сценарии

### 2.2 Система пользователей
- **Регистрация/авторизация:** Обязательная регистрация через Supabase Auth
- **Личный кабинет:** История созданных сценариев пользователя
- **Приватность:** Истории других пользователей не видны

### 2.3 История и управление
- **История просмотров:** Сохранение всех созданных пользователем сценариев
- **Повторное использование:** Возможность редактировать и переиспользовать сохраненные истории

---

## 3. ТЕХНИЧЕСКИЕ ТРЕБОВАНИЯ

### 3.1 Технологический стек
- **Фронтенд:** Next.js (TypeScript/TSX), Tailwind CSS, shadcn/ui
- **Бэкенд:** Supabase (база данных, аутентификация)
- **AI модель:** Локальная нейросеть (бесплатное решение)
- **Хостинг:** Vercel
- **Пакетный менеджер:** pnpm

### 3.2 Архитектура базы данных
```sql
-- Пользователи (через Supabase Auth)
-- Истории
stories:
  - id (UUID, PK)
  - user_id (UUID, FK)
  - title (TEXT)
  - content (TEXT)
  - created_at (TIMESTAMP)
  - updated_at (TIMESTAMP)

-- Сценарии "что если"
scenarios:
  - id (UUID, PK)
  - story_id (UUID, FK)
  - user_id (UUID, FK)
  - question (TEXT)
  - ai_response (TEXT)
  - created_at (TIMESTAMP)
```

### 3.3 AI интеграция
- **Модель:** Бесплатная локальная модель (например, Ollama с Llama 2/3)
- **Альтернативы:** Hugging Face Transformers, локальный запуск через WebLLM
- **Бюджет:** $0 - только бесплатные решения

---

## 4. ПОЛЬЗОВАТЕЛЬСКИЙ ИНТЕРФЕЙС

### 4.1 Страницы
1. **Главная страница:** Краткое описание + кнопка начать
2. **Страница создания:** Форма ввода истории и вопроса
3. **Страница результата:** Отображение сгенерированного сценария
4. **Личный кабинет:** История пользователя
5. **Авторизация:** Вход/регистрация

### 4.2 Адаптивность
- **Мобильная версия:** Полная адаптация под мобильные устройства
- **Планшеты:** Оптимизация для средних экранов
- **Десктоп:** Основная версия

---

## 5. НЕФУНКЦИОНАЛЬНЫЕ ТРЕБОВАНИЯ

### 5.1 Производительность
- **Время ответа:** Нет строгих требований
- **Генерация AI:** Время зависит от выбранной модели

### 5.2 Безопасность
- **Аутентификация:** Через Supabase Auth
- **Приватность:** Истории доступны только создателю

### 5.3 Ограничения
- **Длина истории:** Без ограничений
- **Количество сценариев:** Без ограничений

---

## 6. ЭТАПЫ РАЗРАБОТКИ

### Этап 1: Базовая настройка
- [ ] Инициализация Next.js проекта с TypeScript
- [ ] Настройка Tailwind CSS и shadcn/ui
- [ ] Подключение Supabase

### Этап 2: Аутентификация
- [ ] Настройка Supabase Auth
- [ ] Создание страниц входа/регистрации
- [ ] Защита приватных маршрутов

### Этап 3: Основной функционал
- [ ] Создание формы ввода истории
- [ ] Интеграция с AI моделью
- [ ] Страница отображения результатов

### Этап 4: База данных
- [ ] Создание схемы БД в Supabase
- [ ] Сохранение историй и сценариев
- [ ] Личный кабинет пользователя

### Этап 5: Деплой и тестирование
- [ ] Деплой на Vercel
- [ ] Тестирование функционала
- [ ] Мобильная оптимизация

---

## 7. ВОПРОСЫ ДЛЯ УТОЧНЕНИЯ

1. **AI модель:** Какую конкретно локальную модель предпочитаешь? (Ollama, WebLLM, другое?)
2. **Дизайн:** Есть ли предпочтения по цветовой схеме или стилю?
3. **Доменное имя:** Планируется ли кастомный домен или достаточно Vercel subdomain?